# Generated by copilot-helper v0.1-TEST / 2023-08-22 16:00:00
Parameters:
  App:
    Type: String
    Description: Your application's name.
  Env:
    Type: String
    Description: The environment name your service, job, or workflow is being deployed to.

Mappings:
  monitoringEnvConfiguration:

    development:
      EnableOpsCenter: false


Resources:
  monitoringResourceGroup:
    Type: AWS::ResourceGroups::Group
    Properties:
      Name: !Sub "${App}-${Env}-group"
      Description: !Sub "Resource group for the ${App}-${Env} environment."
      ResourceQuery:
        Type: TAG_FILTERS_1_0
        Query:
          TagFilters:
            - Key: copilot-application
              Values:
                - !Sub "${App}"
            - Key: copilot-environment
              Values:
                - !Sub "${Env}"

  monitoringApplicationInsights:
    Type: AWS::ApplicationInsights::Application
    Properties:
      AutoConfigurationEnabled: true
      ResourceGroupName: !Ref monitoringResourceGroup
      OpsCenterEnabled: !FindInMap [monitoringEnvConfiguration, !Ref Env, EnableOpsCenter]
