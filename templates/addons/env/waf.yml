Parameters:
  # Copilot required Parameters...
  App:
    Type: String
    Description: Your application's name.
  Env:
    Type: String
    Description: The environment name your service, job, or workflow is being deployed to.

  # Other parameters...
  LBARN:
    Type: String

Mappings:
  EnvWAFConfigurationMap:
    # Create an entry for each environment
    {% for env_name, waf_arn in arns.items() %}
    {{ env_name }}:
      WebACLArn: '{{ waf_arn }}'
    {% endfor %}

Resources:
  SampleWebACLAssociation:
    Type: 'AWS::WAFv2::WebACLAssociation'
    Properties:
      WebACLArn: !FindInMap [EnvWAFConfigurationMap, !Ref Env, WebACLArn]
      ResourceArn: !Ref LBARN
